<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta tags and title -->
    <style>
        /* Your existing CSS styles */
    </style>
</head>
<body>
    <!-- Header with navigation -->
    <header>
        <!-- Header content -->
    </header>

    <section>
        <h2>Organize Game Sessions</h2>
        <div id="sessionsList">
            <!-- Game sessions will appear here -->
        </div>
        <form id="sessionForm">
            <!-- Form fields for creating a session -->
        </form>
    </section>

    <footer>
        <p>Website created by Zodin</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Function to fetch sessions from the server and update UI
            function fetchSessions() {
                fetch('/sessions')
                    .then(response => response.json())
                    .then(sessions => {
                        const sessionsList = document.getElementById('sessionsList');
                        sessionsList.innerHTML = ''; // Clear existing sessions
                        sessions.forEach(session => {
                            const sessionItem = createSessionItem(session);
                            sessionsList.appendChild(sessionItem);
                        });
                    })
                    .catch(error => console.error('Error fetching sessions:', error));
            }

            // Function to create a session item
            function createSessionItem(session) {
                const sessionItem = document.createElement('div');
                sessionItem.innerHTML = `
                    <p><strong>${session.title}</strong> - ${session.game} at ${session.time}</p>
                    <button class="joinButton">Join</button>
                    <hr>
                `;
                return sessionItem;
            }

            // Fetch sessions when the page loads
            fetchSessions();

            // Handle form submission to create a new session
            const sessionForm = document.getElementById('sessionForm');
            sessionForm.addEventListener('submit', event => {
                event.preventDefault();
                const formData = new FormData(sessionForm);
                fetch('/sessions', {
                    method: 'POST',
                    body: formData
                })
                .then(() => {
                    fetchSessions(); // Update session list after creating a new session
                    sessionForm.reset();
                })
                .catch(error => console.error('Error creating session:', error));
            });

            // Event delegation for join button
            const sessionsList = document.getElementById('sessionsList');
            sessionsList.addEventListener('click', event => {
                if (event.target.classList.contains('joinButton')) {
                    const sessionTitle = event.target.parentNode.querySelector('strong').textContent;
                    // Implement join session logic here
                    alert(`Joining session: ${sessionTitle}`);
                }
            });
        });
    </script>
</body>
</html>

